@{
     ViewBag.Title = "Reset Password";
     Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<div class="container py-5">
     <div class="row justify-content-center">
          <div class="col-md-6">
               <div class="card shadow">
                    <div class="card-header bg-primary text-white">
                         <h4 class="mb-0">Reset Password</h4>
                    </div>
                    <div class="card-body p-4">
                         <div class="text-center mb-4">
                              <i class="fas fa-key fa-3x text-muted mb-3"></i>
                              <h5>Create New Password</h5>
                              <p class="text-muted">Your new password must be different from previous passwords.</p>
                         </div>

                         <form action="@Url.Action("ResetPassword", "Account")" method="post">
                              @Html.AntiForgeryToken()

                              <input type="hidden" name="email" value="@ViewBag.Email" />

                              <div class="form-group">
                                   <label for="newPassword">New Password</label>
                                   <input type="password" class="form-control" id="newPassword" name="newPassword"
                                          placeholder="Enter new password" required minlength="8">
                              </div>

                              <div class="form-group">
                                   <label for="confirmPassword">Confirm New Password</label>
                                   <input type="password" class="form-control" id="confirmPassword" name="confirmPassword"
                                          placeholder="Confirm new password" required minlength="8">
                              </div>

                              <div class="form-group mb-0">
                                   <button type="submit" class="btn btn-primary btn-block">
                                        <i class="fas fa-save mr-2"></i> Reset Password
                                   </button>
                              </div>
                         </form>
                    </div>
               </div>

               <!-- Success Message (Hidden by default) -->
               <div class="alert alert-success mt-4" id="successMessage" style="display: none;">
                    <h5><i class="fas fa-check-circle mr-2"></i> Password Reset Successful!</h5>
                    <p>Your password has been reset successfully.</p>
                    <a href="@Url.Action("Login", "Account")" class="btn btn-success">
                         <i class="fas fa-sign-in-alt mr-2"></i> Log In
                    </a>
               </div>
          </div>
     </div>
</div>

@section Scripts {
     <script>
        $(document).ready(function() {
            // Password match validation
            $('#confirmPassword').on('keyup', function() {
                if ($('#newPassword').val() == $('#confirmPassword').val()) {
                    $('#confirmPassword').removeClass('is-invalid').addClass('is-valid');
                } else {
                    $('#confirmPassword').removeClass('is-valid').addClass('is-invalid');
                }
            });
            });
     </script>
}